<html>
  <head>
    <title>KittyCityScroller</title>
    <script src="http://cloud.github.com/downloads/processing-js/processing-js/processing-1.4.1.min.js"></script>
    <script type="text/processing" data-processing-target="mycanvas">

        var WINDOW_WIDTH = 1000;
        var WINDOW_HEIGHT = 600; 

        var LEFT_ARROW = 37;
        var UP_ARROW = 38; 
        var RIGHT_ARROW = 39;
        var DOWN_ARROW = 40;

        var skyline1List = new ArrayList<Skyline>();
        var skyline2List = new ArrayList<Skyline>();
        var skyline3List = new ArrayList<Skyline>();

        var widthOfBuilding;

        var xPosOfBuilding1;
        var xPosOfBuilding2;
        var xPosOfBuilding3;

        var xPosOfPriorBuilding1;
        var xPosOfPriorBuilding2;
        var xPosOfPriorBuilding3;

        var speedOfBuilding1 = 9;
        var speedOfBuilding2 = 6;
        var speedOfBuilding3 = 3;

        var heightOfBuilding1;
        var heightOfBuilding2;
        var heightOfBuilding3;

        var color1OfBuilding1 = 19;
        var color2OfBuilding1 = 15;
        var color3OfBuilding1 = 255;

        var color1OfBuilding2 = 11;
        var color2OfBuilding2 = 11;
        var color3OfBuilding2 = 153;

        var color1OfBuilding3 = 5;
        var color2OfBuilding3 = 5;
        var color3OfBuilding3 = 92;

        void DrawSkyList1() {
          for(var i = 0; i < skyline1List.size(); i++) {
            Skyline currentSkyline1 = skyline1List.get(i);
            currentSkyline1.moveSkyline();
          }
        } 

        void DrawSkyList2() {
          for(var i = 0; i < skyline2List.size(); i++) {
            Skyline currentSkyline2 = skyline2List.get(i);
            currentSkyline2.moveSkyline();
          }
        } 

        void DrawSkyList3() {
          for(var i = 0; i < skyline3List.size(); i++) {
            Skyline currentSkyline3 = skyline3List.get(i);
            currentSkyline3.moveSkyline();
          }
        } 

        void BuildSkyline1() {
          widthOfBuilding = random(80, 150);
          heightOfBuilding1 = random(-180, -60);
          xPosOfBuilding1 = xPosOfPriorBuilding1 - widthOfBuilding;
          skyline1List.add(new Skyline(xPosOfBuilding1, widthOfBuilding, speedOfBuilding1, heightOfBuilding1, color1OfBuilding1, color2OfBuilding1, color3OfBuilding1)); 
          xPosOfPriorBuilding1 = xPosOfBuilding1;
        }

        void BuildSkyline2() {
          widthOfBuilding = random(80, 150);
          heightOfBuilding2 = random(-400, -160);
          xPosOfBuilding2 = xPosOfPriorBuilding2 - widthOfBuilding;
          skyline2List.add(new Skyline(xPosOfBuilding2, widthOfBuilding, speedOfBuilding2, heightOfBuilding2, color1OfBuilding2, color2OfBuilding2, color3OfBuilding2)); 
          xPosOfPriorBuilding2 = xPosOfBuilding2;
        }

        void BuildSkyline3() {
          widthOfBuilding = random(80, 150);
          heightOfBuilding3 = random(-560, -360);
          xPosOfBuilding3 = xPosOfPriorBuilding3 - widthOfBuilding;
          skyline3List.add(new Skyline(xPosOfBuilding3, widthOfBuilding, speedOfBuilding3, heightOfBuilding3, color1OfBuilding3, color2OfBuilding3, color3OfBuilding3)); 
          xPosOfPriorBuilding3 = xPosOfBuilding3;
        }

        void setup() {
            numberOfSkyline1 = 12;
            xPosOfPriorBuilding1 = 1000;
            for(var i = 0; i < numberOfSkyline1; i++) {
              BuildSkyline1();
            }

            numberOfSkyline2 = 12;
            xPosOfPriorBuilding2 = 1000;
            for(var i = 0; i < numberOfSkyline2; i++) {
              BuildSkyline2();
            }

            numberOfSkyline3 = 12;
            xPosOfPriorBuilding3 = 1000;
            for(var i = 0; i < numberOfSkyline3; i++) {
              BuildSkyline3();
            }

          size(WINDOW_WIDTH, WINDOW_HEIGHT); 
        
          frameRate(50); 
        
        }

        void draw() {
        
          background(0, 0, 0);

          // moon
          fill(255, 255, 255);
          ellipse(155, 35, 175, 175);

          // skyline 3
          DrawSkyList3();

          xPosOfPriorBuilding3 += 3;

          if (xPosOfPriorBuilding3 > -200) {
            BuildSkyline3();

          }

          // skyline 2
          DrawSkyList2();

          xPosOfPriorBuilding2 += 6;

          if (xPosOfPriorBuilding2 > -200) {
            BuildSkyline2();

          }

          // skyline 1
          DrawSkyList1();

          xPosOfPriorBuilding1 += 9;

          if (xPosOfPriorBuilding1 > -200) {
            BuildSkyline1();

          }

        } 

        // new class ----------------------------------------------------------------------------------------------------------------------------------
        class Skyline {

          var xPosSkyline, widthSkyline, speedSkyline, heightSkyline, color1Skyline, color2Skyline, color3Skyline;

          Skyline (float xSkyline, float wSkyline, float sSkyline, float hSkyline, float c1Skyline, float c2Skyline, float c3Skyline) {

            xPosSkyline = xSkyline;

            widthSkyline = wSkyline;

            speedSkyline = sSkyline;

            heightSkyline = hSkyline;

            color1Skyline = c1Skyline;

            color2Skyline = c2Skyline;

            color3Skyline = c3Skyline;

          }

          void moveSkyline() {
            updateSkyline();
            drawSkyline();
          }

          void updateSkyline() { 
        
            xPosSkyline += speedSkyline;

          }
          void drawSkyline() {

            strokeWeight(3);
            fill(color1Skyline, color2Skyline, color3Skyline);
            rect(xPosSkyline, 600, widthSkyline, heightSkyline);

          } 

        }
        
        </script> 
    </head>
    
    <body>
    <canvas id="mycanvas"></canvas>
  </body>
</html>