<html>
  <head>
    <title>KittyCityScroller</title>
    <script src="http://cloud.github.com/downloads/processing-js/processing-js/processing-1.4.1.min.js"></script>
    <script type="text/processing" data-processing-target="mycanvas">

        Kitty readyKitty = new Kitty(500, 50);

        var LEFT_ARROW = 37;
        var UP_ARROW = 38; 
        var RIGHT_ARROW = 39;
        var DOWN_ARROW = 40;

        var WINDOW_WIDTH = 1000;
        var WINDOW_HEIGHT = 600; 

        var skyline1List = new ArrayList<Skyline>();
        var skyline2List = new ArrayList<Skyline>();
        var skyline3List = new ArrayList<Skyline>();

        var skyline4List = new ArrayList<Skyline>();
        var skyline5List = new ArrayList<Skyline>();
        var skyline6List = new ArrayList<Skyline>();

        var widthOfBuilding1;
        var widthOfBuilding2;
        var widthOfBuilding3;

        var widthOfBuildingA;
        var widthOfBuildingB;
        var widthOfBuildingC;

        var heightOfBuilding1;
        var heightOfBuilding2;
        var heightOfBuilding3;

        var heightOfBuildingA;
        var heightOfBuildingB;
        var heightOfBuildingC;

        var xPosOfBuilding1;
        var xPosOfBuilding2;
        var xPosOfBuilding3;

        var xPosOfBuildingA;
        var xPosOfBuildingB;
        var xPosOfBuildingC;

        var xPosOfPriorBuilding1;
        var xPosOfPriorBuilding2;
        var xPosOfPriorBuilding3;

        var xPosOfPriorBuildingA;
        var xPosOfPriorBuildingB;
        var xPosOfPriorBuildingC;

        var speedOfBuilding1 = 10;
        var speedOfBuilding2 = 7;
        var speedOfBuilding3 = 4;

        var color1OfBuilding1 = 19;
        var color2OfBuilding1 = 15;
        var color3OfBuilding1 = 255;

        var color1OfBuilding2 = 11;
        var color2OfBuilding2 = 11;
        var color3OfBuilding2 = 153;

        var color1OfBuilding3 = 5;
        var color2OfBuilding3 = 5;
        var color3OfBuilding3 = 92;

        void DrawSkyList1() {
          for(var i = 0; i < skyline1List.size(); i++) {
            Skyline currentSkyline1 = skyline1List.get(i);
            currentSkyline1.drawSkyline();
          }
        } 

        void DrawSkyList2() {
          for(var i = 0; i < skyline2List.size(); i++) {
            Skyline currentSkyline2 = skyline2List.get(i);
            currentSkyline2.drawSkyline();
          }
        } 

        void DrawSkyList3() {
          for(var i = 0; i < skyline3List.size(); i++) {
            Skyline currentSkyline3 = skyline3List.get(i);
            currentSkyline3.drawSkyline();
          }
        } 

        void BuildSkylineA() {
          widthOfBuildingA = random(80, 150);
          heightOfBuildingA = random(-180, -60);
          xPosOfPriorBuildingA = xPosOfBuildingA;
          skyline1List.add(new Skyline(xPosOfBuildingA, widthOfBuildingA, speedOfBuilding1, heightOfBuildingA, color1OfBuilding1, color2OfBuilding1, color3OfBuilding1)); 
          xPosOfBuildingA = xPosOfPriorBuildingA + widthOfBuildingA;
        }

        void BuildSkylineB() {
	      widthOfBuildingB = random(80, 150);
	      heightOfBuildingB = random(-400, -160);
	      xPosOfPriorBuildingB = xPosOfBuildingB;
	      skyline2List.add(new Skyline(xPosOfBuildingB, widthOfBuildingB, speedOfBuilding2, heightOfBuildingB, color1OfBuilding2, color2OfBuilding2, color3OfBuilding2)); 
	      xPosOfBuildingB = xPosOfPriorBuildingB + widthOfBuildingB;
        }

        void BuildSkylineC() {
	      widthOfBuildingC = random(80, 150);
	      heightOfBuildingC = random(-560, -360);
	      xPosOfPriorBuildingC = xPosOfBuildingC;
	      skyline3List.add(new Skyline(xPosOfBuildingC, widthOfBuildingC, speedOfBuilding3, heightOfBuildingC, color1OfBuilding3, color2OfBuilding3, color3OfBuilding3)); 
	      xPosOfBuildingC = xPosOfPriorBuildingC + widthOfBuildingC;
        }

        void BuildSkyline1() {
          widthOfBuilding1 = random(80, 150);
          heightOfBuilding1 = random(-180, -60);
          xPosOfBuilding1 = xPosOfPriorBuilding1 - widthOfBuilding1;
          skyline1List.add(new Skyline(xPosOfBuilding1, widthOfBuilding1, speedOfBuilding1, heightOfBuilding1, color1OfBuilding1, color2OfBuilding1, color3OfBuilding1)); 
          xPosOfPriorBuilding1 = xPosOfBuilding1;
        }

        void BuildSkyline2() {
          widthOfBuilding2 = random(80, 150);
          heightOfBuilding2 = random(-400, -160);
          xPosOfBuilding2 = xPosOfPriorBuilding2 - widthOfBuilding2;
          skyline2List.add(new Skyline(xPosOfBuilding2, widthOfBuilding2, speedOfBuilding2, heightOfBuilding2, color1OfBuilding2, color2OfBuilding2, color3OfBuilding2)); 
          xPosOfPriorBuilding2 = xPosOfBuilding2;
        }

        void BuildSkyline3() {
          widthOfBuilding3 = random(80, 150);
          heightOfBuilding3 = random(-560, -360);
          xPosOfBuilding3 = xPosOfPriorBuilding3 - widthOfBuilding3;
          skyline3List.add(new Skyline(xPosOfBuilding3, widthOfBuilding3, speedOfBuilding3, heightOfBuilding3, color1OfBuilding3, color2OfBuilding3, color3OfBuilding3)); 
          xPosOfPriorBuilding3 = xPosOfBuilding3;
        }

        void setup() {
            numberOfSkyline1 = 20;
            xPosOfPriorBuilding1 = 1500;
            xPosOfBuildingA = 1500;
            for(var i = 0; i < numberOfSkyline1; i++) {
              BuildSkyline1();
            }

            numberOfSkyline2 = 20;
            xPosOfPriorBuilding2 = 1500;
            xPosOfBuildingB = 1500;
            for(var i = 0; i < numberOfSkyline2; i++) {
              BuildSkyline2();
            }

            numberOfSkyline3 = 20;
            xPosOfPriorBuilding3 = 1500;
            xPosOfBuildingC = 1500;
            for(var i = 0; i < numberOfSkyline3; i++) {
              BuildSkyline3();
            }

          size(WINDOW_WIDTH, WINDOW_HEIGHT); 
        
          frameRate(50); 
        
        }

        void draw() {
        
          background(0, 0, 0);

          // moon
          fill(255, 255, 255);
          ellipse(155, 35, 175, 175);

          // skyline 3
          DrawSkyList3();

          // xPosOfPriorBuilding3 += 3;

          if (xPosOfPriorBuilding3 > -200) {
            BuildSkyline3();
          }

          if (xPosOfBuildingC > 1000) {
          	BuildSkylineC();
          }

          // skyline 2
          DrawSkyList2();

          // xPosOfPriorBuilding2 += 6;

          if (xPosOfPriorBuilding2 > -200) {
            BuildSkyline2();
          }

          if (xPosOfBuildingB > 1000) {
          	BuildSkylineB();
          }

          // skyline 1
          DrawSkyList1();

          // xPosOfPriorBuilding1 += 9;

          if (xPosOfPriorBuilding1 > -200) {
            BuildSkyline1();
          }

          if (xPosOfBuildingA > 1000) {
          	BuildSkylineA();
          }

          readyKitty.moveKitty();

        } 

        // new class ----------------------------------------------------------------------------------------------------------------------------------
        class Skyline {

          var xPosSkyline, widthSkyline, speedSkyline, heightSkyline, color1Skyline, color2Skyline, color3Skyline;

          Skyline (float xSkyline, float wSkyline, float sSkyline, float hSkyline, float c1Skyline, float c2Skyline, float c3Skyline) {

            xPosSkyline = xSkyline;

            widthSkyline = wSkyline;

            speedSkyline = sSkyline;

            heightSkyline = hSkyline;

            color1Skyline = c1Skyline;

            color2Skyline = c2Skyline;

            color3Skyline = c3Skyline;

          }

          void moveSkyline() {

            update1Skyline();
            update2Skyline();
            drawSkyline();

          }

          void update1Skyline() { 
        
            xPosSkyline += speedSkyline;

          }

          void update2Skyline() {

            xPosSkyline -= speedSkyline;

          }
          void drawSkyline() {

            strokeWeight(3);
            fill(color1Skyline, color2Skyline, color3Skyline);
            rect(xPosSkyline, 600, widthSkyline, heightSkyline);

          } 

        }

        // new class ----------------------------------------------------------------------------------------------------------------------------------
        class Kitty {

          var kittyX, kittyY, coins;
          PImage img;

          Kitty (var kX, var kY) {

            kittyX = kX;

            kittyY = kY;

            img = loadImage("nyan cat-2.gif");

            coins = 0;

          }

          void moveKitty() {

            loadImage("nyan cat-2.gif");
            drawKitty();
            updateKitty();

          }

          void updateKitty() {

            if (keyPressed && keyCode == UP_ARROW) {
              jump();
            }

            else if (keyPressed && keyCode == LEFT_ARROW) {

              moveLeft();

              for(var i = 0; i < skyline1List.size(); i++) {
                Skyline currentSkyline1 = skyline1List.get(i);
                currentSkyline1.update1Skyline();
              }
              for(var i = 0; i < skyline2List.size(); i++) {
                Skyline currentSkyline2 = skyline2List.get(i);
                currentSkyline2.update1Skyline();
              }
              for(var i = 0; i < skyline3List.size(); i++) {
                Skyline currentSkyline3 = skyline3List.get(i);
                currentSkyline3.update1Skyline();
              }

              xPosOfPriorBuilding3 += 3;
              xPosOfPriorBuilding2 += 6;
              xPosOfPriorBuilding1 += 9;

            }

            else if (keyPressed && keyCode == RIGHT_ARROW) {

              moveRight();

              for(var i = 0; i < skyline1List.size(); i++) {
                Skyline currentSkyline1 = skyline1List.get(i);
                currentSkyline1.update2Skyline();
              }
              for(var i = 0; i < skyline2List.size(); i++) {
                Skyline currentSkyline2 = skyline2List.get(i);
                currentSkyline2.update2Skyline();
              }
              for(var i = 0; i < skyline3List.size(); i++) {
                Skyline currentSkyline3 = skyline3List.get(i);
                currentSkyline3.update2Skyline();
              }

              xPosOfPriorBuilding3 -= 3;
              xPosOfPriorBuilding2 -= 6;
              xPosOfPriorBuilding1 -= 9;

            }

            else {

              fall();

            }

          }

          void drawKitty() { 

            image(img, kittyX, kittyY, 64, 64);

          }

          void jump() {

            img = loadImage("nyan cat-2.gif");
            kittyY -= 30;

          }

          void moveLeft() {
            img = loadImage("nyan cat-2.gif");
            // kittyX -= 25;
          }

          void moveRight() {

            img = loadImage("nyan cat-2.gif");
            // kittyX += 25;

          }

          void fall() {

           if(kittyY < height - 65) {
              kittyY += 15;

            }
        
          }

        }
        
        </script> 
    </head>
    
    <body>
    <canvas id="mycanvas"></canvas>
  </body>
</html>